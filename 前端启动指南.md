# å‰ç«¯å¯åŠ¨å®Œæ•´æŒ‡å—

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

### 1. ç¡®è®¤ç¯å¢ƒ

```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬ï¼ˆéœ€è¦18+ï¼‰
node --version

# æ£€æŸ¥npmç‰ˆæœ¬
npm --version

# ç¡®è®¤å½“å‰ç›®å½•
pwd  # æˆ– cd ï¼ˆWindowsï¼‰
# åº”è¯¥åœ¨é¡¹ç›®æ ¹ç›®å½•: F:\CodeProject\dify-reChat
```

### 2. ç¡®è®¤åç«¯å·²å¯åŠ¨

- âœ… åç«¯æœåŠ¡è¿è¡Œåœ¨ http://localhost:8000
- âœ… APIæ–‡æ¡£å¯è®¿é—®: http://localhost:8000/api/docs
- âœ… å¥åº·æ£€æŸ¥æ­£å¸¸: http://localhost:8000/health è¿”å› `{"status":"healthy"}`

### 3. ç¡®è®¤Node.jsç¯å¢ƒ

```bash
# æ£€æŸ¥æ˜¯å¦å®‰è£…äº†å¿…è¦çš„npmåŒ…
npm --version

# æ£€æŸ¥å‰ç«¯ç›®å½•ç»“æ„
ls frontend/
```

---

## ğŸš€ å¯åŠ¨æ­¥éª¤

### æ–¹æ³•1: å‘½ä»¤è¡Œå¯åŠ¨ï¼ˆå®Œæ•´æ­¥éª¤ï¼‰

#### ç¬¬ä¸€æ¬¡å¯åŠ¨

```bash
# 1. è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# 2. å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œæˆ–ä¾èµ–æ›´æ–°åï¼‰
npm install

# ç­‰å¾…å®‰è£…å®Œæˆï¼Œä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
# added 234 packages, and audited 235 packages in 15s

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

#### åç»­å¯åŠ¨ï¼ˆä¾èµ–å·²å®‰è£…ï¼‰

```bash
# 1. è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

---

### æ–¹æ³•2: ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬ï¼ˆWindowsæ¨èï¼‰

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•åŒå‡»è¿è¡Œ
start_frontend.bat

# æˆ–å‘½ä»¤è¡Œè¿è¡Œ
start_frontend.bat
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- æ£€æŸ¥å¹¶è¿›å…¥å‰ç«¯ç›®å½•
- å®‰è£…/æ›´æ–°ä¾èµ–ï¼ˆå¦‚æœéœ€è¦ï¼‰
- å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨

---

### æ–¹æ³•3: VSCodeä¸­å¯åŠ¨

#### ä½¿ç”¨é›†æˆç»ˆç«¯

1. åœ¨VSCodeä¸­æ‰“å¼€é¡¹ç›®
2. æ‰“å¼€ç»ˆç«¯ï¼ˆCtrl + `ï¼‰
3. æ‰§è¡Œå¯åŠ¨å‘½ä»¤ï¼š

```bash
cd frontend
npm run dev
```

#### ä½¿ç”¨è°ƒè¯•é…ç½®

åˆ›å»º `.vscode/launch.json`ï¼š

```json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Vite - å‰ç«¯",
            "type": "node",
            "request": "launch",
            "command": "npm",
            "args": [
                "run",
                "dev"
            ],
            "cwd": "${workspaceFolder}/frontend",
            "console": "integratedTerminal",
            "internalConsoleOptions": "neverOpen"
        }
    ]
}
```

ç„¶åæŒ‰ `F5` å¯åŠ¨è°ƒè¯•ã€‚

---

### æ–¹æ³•4: ä½¿ç”¨pnpmï¼ˆå¯é€‰ï¼Œæ›´å¿«ï¼‰

å¦‚æœä½¿ç”¨pnpmä½œä¸ºåŒ…ç®¡ç†å™¨ï¼š

```bash
# 1. è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# 2. å®‰è£…ä¾èµ–ï¼ˆä½¿ç”¨pnpmï¼‰
pnpm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

---

## âœ… å¯åŠ¨æˆåŠŸæ ‡å¿—

### æ­£å¸¸å¯åŠ¨è¾“å‡º

```
VITE v5.x.x  ready in xxx ms

âœ  Local:   http://localhost:5173/
âœ  Network: use --host to expose
âœ  press h + enter to show help
```

### éªŒè¯æœåŠ¡è¿è¡Œ

**1. è®¿é—®é¦–é¡µ**
```
æµè§ˆå™¨è®¿é—®: http://localhost:5173
åº”è¯¥çœ‹åˆ°Vueåº”ç”¨ç•Œé¢ï¼Œå¯èƒ½æ˜¯ç™»å½•é¡µé¢æˆ–ä¸»é¡µé¢
```

**2. æ£€æŸ¥ç½‘ç»œè¯·æ±‚**
- æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
- åˆ‡æ¢åˆ°"ç½‘ç»œ"ï¼ˆNetworkï¼‰æ ‡ç­¾
- å°è¯•ç™»å½•æˆ–æŸ¥çœ‹é¡µé¢
- åº”è¯¥èƒ½çœ‹åˆ°å‘é€åˆ° `/api/*` çš„è¯·æ±‚ï¼ŒçŠ¶æ€ç ä¸º200

**3. æ£€æŸ¥æ§åˆ¶å°**
- æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
- æŸ¥çœ‹Consoleæ ‡ç­¾
- åº”è¯¥æ²¡æœ‰çº¢è‰²é”™è¯¯ä¿¡æ¯
- å¯èƒ½ä¼šæœ‰ä¸€äº›æ­£å¸¸çš„Vue/Viteæ—¥å¿—

---

## ğŸ”§ å¯åŠ¨å‚æ•°è¯¦è§£

### npmè„šæœ¬è¯´æ˜

```json
{
  "scripts": {
    "dev": "vite",        // å¼€å‘æœåŠ¡å™¨
    "build": "vite build", // æ„å»ºç”Ÿäº§ç‰ˆæœ¬
    "preview": "vite preview" // é¢„è§ˆç”Ÿäº§æ„å»º
  }
}
```

| å‘½ä»¤ | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|------|------|---------|
| `npm run dev` | å¯åŠ¨å¼€å‘æœåŠ¡å™¨ | å¼€å‘ç¯å¢ƒ |
| `npm run build` | æ„å»ºç”Ÿäº§ç‰ˆæœ¬ | éƒ¨ç½²å‰ |
| `npm run preview` | é¢„è§ˆç”Ÿäº§æ„å»º | æœ¬åœ°æµ‹è¯•ç”Ÿäº§ç‰ˆæœ¬ |

### Viteé…ç½®è¯¦è§£

æŸ¥çœ‹ `frontend/vite.config.ts`ï¼š

```typescript
export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src')
    }
  },
  server: {
    port: 5173,              // å¼€å‘æœåŠ¡å™¨ç«¯å£
    proxy: {                 // APIä»£ç†é…ç½®
      '/api': {
        target: 'http://localhost:8000',  // ä»£ç†ç›®æ ‡åç«¯
        changeOrigin: true   // æ”¹å˜è¯·æ±‚æº
      }
    }
  }
})
```

#### ä¿®æ”¹ç«¯å£å·

å¦‚æœ5173ç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥ä¿®æ”¹ï¼š

```typescript
// frontend/vite.config.ts
server: {
  port: 5174,  // æ”¹æˆå…¶ä»–ç«¯å£
  proxy: {
    '/api': {
      target: 'http://localhost:8000',
      changeOrigin: true
    }
  }
}
```

#### ä¿®æ”¹APIä»£ç†

å¦‚æœåç«¯ä¸åœ¨8000ç«¯å£ï¼š

```typescript
// frontend/vite.config.ts
server: {
  port: 5173,
  proxy: {
    '/api': {
      target: 'http://localhost:8001',  // åç«¯æ–°ç«¯å£
      changeOrigin: true
    }
  }
}
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜1: æç¤º `npm: command not found`

**åŸå› **: Node.jsæˆ–npmæœªå®‰è£…æˆ–æœªæ·»åŠ åˆ°PATH

**è§£å†³**:
```bash
# 1. æ£€æŸ¥Node.jsæ˜¯å¦å®‰è£…
node --version
npm --version

# 2. å¦‚æœæœªå®‰è£…ï¼Œä¸‹è½½å¹¶å®‰è£…Node.js
# è®¿é—® https://nodejs.org/ ä¸‹è½½LTSç‰ˆæœ¬

# 3. æ£€æŸ¥PATHç¯å¢ƒå˜é‡
# Windows: åœ¨å¼€å§‹èœå•æœç´¢"ç¯å¢ƒå˜é‡"ï¼Œç¼–è¾‘ç³»ç»Ÿå˜é‡
# macOS/Linux: æ£€æŸ¥ ~/.bash_profile æˆ– ~/.zshrc
```

---

### é—®é¢˜2: npm install å¤±è´¥

**é”™è¯¯ä¿¡æ¯**: `EACCES: permission denied` æˆ– `network timeout`

**è§£å†³æ–¹æ¡ˆ1: ä½¿ç”¨ç®¡ç†å‘˜æƒé™**
```bash
# Windows PowerShell/CMD ç®¡ç†å‘˜æƒé™
cd frontend
npm install
```

**è§£å†³æ–¹æ¡ˆ2: æ¸…ç†ç¼“å­˜é‡è£…**
```bash
# 1. æ¸…ç†npmç¼“å­˜
npm cache clean --force

# 2. åˆ é™¤node_modules
cd frontend
rm -rf node_modules package-lock.json

# 3. é‡æ–°å®‰è£…
npm install
```

**è§£å†³æ–¹æ¡ˆ3: ä½¿ç”¨æ·˜å®é•œåƒï¼ˆå›½å†…æ¨èï¼‰**
```bash
# è®¾ç½®æ·˜å®é•œåƒ
npm config set registry https://registry.npmmirror.com

# é‡æ–°å®‰è£…
npm install
```

**è§£å†³æ–¹æ¡ˆ4: ä½¿ç”¨yarnæˆ–pnpm**
```bash
# ä½¿ç”¨yarn
npm install -g yarn
cd frontend
yarn install

# æˆ–ä½¿ç”¨pnpm
npm install -g pnpm
cd frontend
pnpm install
```

---

### é—®é¢˜3: ç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**: `Port 5173 is already in use`

**è§£å†³æ–¹æ¡ˆ1: æ¢ç«¯å£**
```bash
# ä¿®æ”¹ vite.config.ts ä¸­çš„ port: 5174
# ç„¶åé‡å¯
npm run dev
```

**è§£å†³æ–¹æ¡ˆ2: å…³é—­å ç”¨ç«¯å£è¿›ç¨‹**

**Windows**:
```bash
# æŸ¥æ‰¾å ç”¨5173ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :5173

# è®°ä¸‹PIDï¼ˆæœ€åä¸€åˆ—æ•°å­—ï¼‰
# ç»ˆæ­¢è¿›ç¨‹
taskkill /PID <è¿›ç¨‹ID> /F
```

**macOS/Linux**:
```bash
# æŸ¥æ‰¾å ç”¨5173ç«¯å£çš„è¿›ç¨‹
lsof -i :5173

# ç»ˆæ­¢è¿›ç¨‹
kill -9 <PID>
```

---

### é—®é¢˜4: ç¼–è¯‘é”™è¯¯

**é”™è¯¯ä¿¡æ¯**: TypeScripté”™è¯¯ã€Vueç»„ä»¶é”™è¯¯ç­‰

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ¸…ç†ç¼“å­˜å¹¶é‡æ–°å®‰è£…
cd frontend
rm -rf node_modules package-lock.json
npm install

# 2. å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œæ£€æŸ¥TypeScriptç‰ˆæœ¬
npm install --save-dev typescript@latest
npm install --save-dev @vue/tsconfig@latest

# 3. æ£€æŸ¥ä»£ç è¯­æ³•ï¼Œç¡®ä¿TypeScriptç±»å‹æ­£ç¡®
```

---

### é—®é¢˜5: çƒ­æ›´æ–°å¤±æ•ˆ

**ç°è±¡**: ä¿®æ”¹ä»£ç åé¡µé¢æ²¡æœ‰è‡ªåŠ¨åˆ·æ–°

**è§£å†³**:
```bash
# 1. é‡å¯å¼€å‘æœåŠ¡å™¨
npm run dev

# 2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
# 3. æ¸…ç†æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl+Shift+Rï¼‰
# 4. æ£€æŸ¥æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯å¯¼è‡´ç¼–è¯‘å¤±è´¥
```

---

### é—®é¢˜6: APIä»£ç†ä¸å·¥ä½œ

**ç°è±¡**: æµè§ˆå™¨ç½‘ç»œé¢æ¿çœ‹åˆ°CORSé”™è¯¯

**è§£å†³**:
```bash
# 1. ç¡®è®¤åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ
curl http://localhost:8000/health

# 2. æ£€æŸ¥ vite.config.ts ä»£ç†é…ç½®
# ç¡®ä¿targetåœ°å€æ­£ç¡®

# 3. é‡å¯å‰ç«¯æœåŠ¡
npm run dev
```

---

## ğŸ”„ å¼€å‘æµç¨‹

### æ—¥å¸¸å¼€å‘å¯åŠ¨æµç¨‹

```bash
# 1. å¯åŠ¨åç«¯ï¼ˆä¿æŒè¿è¡Œï¼‰
cd backend
venv\Scripts\activate
uvicorn app.main:app --reload

# 2. æ–°ç»ˆç«¯å¯åŠ¨å‰ç«¯
cd frontend
npm run dev

# 3. ä¿®æ”¹ä»£ç 
# å‰ç«¯ï¼šVueç»„ä»¶ä¼šçƒ­æ›´æ–°
# åç«¯ï¼šPythonä»£ç ä¼šè‡ªåŠ¨é‡å¯

# 4. æµ‹è¯•åŠŸèƒ½
# è®¿é—® http://localhost:5173 æµ‹è¯•å‰ç«¯
# è®¿é—® http://localhost:8000/api/docs æµ‹è¯•åç«¯API
```

### ç”Ÿäº§æ„å»ºæµç¨‹

```bash
# 1. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
cd frontend
npm run build

# 2. é¢„è§ˆæ„å»ºç»“æœ
npm run preview

# 3. è®¿é—®é¢„è§ˆåœ°å€ï¼ˆé€šå¸¸æ˜¯http://localhost:4173ï¼‰
# æµ‹è¯•ç”Ÿäº§ç‰ˆæœ¬åŠŸèƒ½
```

---

## ğŸ“Š å¼€å‘ç›‘æ§

### æŸ¥çœ‹å®æ—¶æ—¥å¿—

```bash
# ç»ˆç«¯è¾“å‡ºåŒ…å«ï¼š
- Viteå¯åŠ¨ä¿¡æ¯
- çƒ­æ›´æ–°äº‹ä»¶
- ç¼–è¯‘é”™è¯¯ä¿¡æ¯
- ç½‘ç»œè¯·æ±‚ä»£ç†ä¿¡æ¯
```

### æµè§ˆå™¨å¼€å‘è€…å·¥å…·

**Networké¢æ¿**:
- æ£€æŸ¥APIè¯·æ±‚æ˜¯å¦æ­£å¸¸ä»£ç†åˆ°åç«¯
- æŸ¥çœ‹è¯·æ±‚çŠ¶æ€ç å’Œå“åº”æ—¶é—´
- æ£€æŸ¥æ˜¯å¦æœ‰CORSé”™è¯¯

**Consoleé¢æ¿**:
- æŸ¥çœ‹Vueç»„ä»¶é”™è¯¯
- æ£€æŸ¥JavaScriptè¿è¡Œæ—¶é”™è¯¯
- è§‚å¯Ÿçƒ­æ›´æ–°ä¿¡æ¯

**Componentsé¢æ¿** (Vue Devtools):
- æŸ¥çœ‹ç»„ä»¶çŠ¶æ€
- æ£€æŸ¥ç»„ä»¶propså’Œevents
- è°ƒè¯•PiniaçŠ¶æ€

### APIæµ‹è¯•

```bash
# æµ‹è¯•åç«¯APIæ˜¯å¦æ­£å¸¸
curl http://localhost:8000/health

# æµ‹è¯•å‰ç«¯é¡µé¢æ˜¯å¦æ­£å¸¸åŠ è½½
curl -I http://localhost:5173
```

---

## ğŸ¯ å¿«é€Ÿå‚è€ƒ

### å®Œæ•´å¯åŠ¨å‘½ä»¤ï¼ˆå¤åˆ¶ç²˜è´´ï¼‰

**é¦–æ¬¡å¯åŠ¨**:
```bash
cd frontend && npm install && npm run dev
```

**æ—¥å¸¸å¯åŠ¨**:
```bash
cd frontend && npm run dev
```

### é‡è¦åœ°å€

- å‰ç«¯æœåŠ¡: http://localhost:5173
- åç«¯æœåŠ¡: http://localhost:8000
- APIæ–‡æ¡£: http://localhost:8000/api/docs
- ReDocæ–‡æ¡£: http://localhost:8000/api/redoc

### å¸¸ç”¨å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§æ„å»º
npm run preview

# æŸ¥çœ‹å®‰è£…çš„åŒ…
npm list

# æŸ¥çœ‹npmç‰ˆæœ¬
npm --version

# æ¸…ç†ç¼“å­˜
npm cache clean --force
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [åç«¯å¯åŠ¨æŒ‡å—](./åç«¯å¯åŠ¨æŒ‡å—.md) - åç«¯æœåŠ¡å¯åŠ¨æŒ‡å—
- [START_DEVELOPMENT.md](./START_DEVELOPMENT.md) - å®Œæ•´å¼€å‘ç¯å¢ƒæŒ‡å—
- [frontend/README.md](./frontend/README.md) - å‰ç«¯é¡¹ç›®è¯¦ç»†æ–‡æ¡£
- [README.md](./README.md) - é¡¹ç›®æ€»è§ˆ

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **å¯åŠ¨å‰ç«¯æœåŠ¡**
2. **è®¿é—®åº”ç”¨**: http://localhost:5173
3. **æµ‹è¯•åŠŸèƒ½**:
   - æ³¨å†Œ/ç™»å½•åŠŸèƒ½
   - èŠå¤©ç•Œé¢
   - ç®¡ç†åå°
4. **è¿æ¥åç«¯**: ç¡®ä¿APIä»£ç†å·¥ä½œæ­£å¸¸

**å‰ç«¯å¯åŠ¨æˆåŠŸåï¼Œå°±å¯ä»¥å¼€å§‹å¼€å‘å’Œæµ‹è¯•åŠŸèƒ½äº†ï¼** ğŸš€

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚